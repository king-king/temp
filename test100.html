<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <style>
        body {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            right: 0;
            font-size: 30px;
            -webkit-overflow-scrolling: touch;
        }

        img {
            height: 300px;
        }
    </style>
</head>
<body>
</body>
<script>
    function task(ts, callback) {
        var index = 0;
        for (var i = 0; i < ts.length; i++) {
            ts[i](function () {
                ++index == ts.length && callback();
            });
        }
    }
    var s = ["img/1.jpg", "img/1.png"];
    function map(arr, func) {
        var narr = [];
        for (var i = 0; i < arr.length; i++) {
            narr.push(func(arr[i]));
        }
        return narr;
    }

    task(map(s, function (src) {
        return function (done) {
            var img = new Image();
            img.src = src;
            img.onload = done;
            document.body.appendChild(img);
        }
    }), function () {
        console.log("ok");
    });

</script>
</html>