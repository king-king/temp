<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        .tar {
            width: 100px;
            height: 100px;
            position: absolute;
            top: 150px;
            left: 150px;
            background: lightseagreen;
            opacity: .5;
        }

        .tar2 {
            width: 100px;
            height: 100px;
            position: absolute;
            top: 150px;
            left: 150px;
            background: orangered;
            opacity: .5;
            -webkit-transform: translate3d(100px, 100px, 0) rotateZ(30deg) scale(1.3);
        }

        .point {
            width: 10px;
            height: 10px;
            position: absolute;
            top: 0;
            left: 0;
            background: #000;
        }
    </style>
</head>
<body>
<div class="tar">
    <div class="point"></div>
</div>
<!--<div class="tar2"></div>-->
<script src="lib/client.js"></script>
<script src="lib.js"></script>
<script>
    main( function () {
        var z3d = imports( "3d" );
        var css = imports( "css" );
        var m3d = z3d.matrix;


        var t = document.querySelector( ".tar" );
//        var t2 = document.querySelector( ".tar2" );


        var curMatrix = m3d.eye();
//        curMatrix = z3d.combine( curMatrix, m3d.rotate( 0, 1, 1, 45 / 180 * Math.PI ) );
//        curMatrix = z3d.combine( curMatrix, m3d.translate( 100, 100, 0 ) );
//        curMatrix = z3d.combine( curMatrix, m3d.rotateZ( 30 / 180 * Math.PI ) );
//        curMatrix = z3d.combine( curMatrix, m3d.scale( 1.3, 1.3, 1.3 ) );
//        css.transform( t, css.matrix3d( curMatrix ) );


        t.onDrag( {
            onMove : function ( arg ) {
                var temp = z3d.combine( m3d.rotate( 1, 0, 0, arg.dy / 180 * Math.PI ), m3d.rotate( 0, 1, 0, arg.dx / 180 * Math.PI ) );
                curMatrix = z3d.combine( curMatrix, temp );
//                curMatrix = z3d.combine( curMatrix, m3d.rotateX( arg.dy / 180 * Math.PI ) );
//                curMatrix = z3d.combine( curMatrix, m3d.rotateY( arg.dx / 180 * Math.PI ) );
//                curMatrix = z3d.combine( curMatrix, m3d.translate( arg.dx, arg.dy, 0 ) );
                css.transform( t, css.matrix3d( curMatrix ) );
            }
        } );

    } );
</script>
</body>
</html>