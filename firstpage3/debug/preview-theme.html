<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>初页预览</title>
    <meta name="mobileoptimized" content="0"/>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="screen-orientation" content="portrait">
    <meta name="browsermode" content="application">

    <script src="../lib/zach/client.js"></script>
    <script>
        main( function () {
            var debug = imports( "./debug.js" );
            var pointer = imports( "pointer" );
            var async = imports( "async" );
            var object = imports( "object" );
            var array = imports( "array" );

            var switchBar = debug.Options( {
                name : "switch",
                fontSize : 12,
                width : 60
            } );

            var themeBar = debug.Options( {
                name : "theme",
                fontSize : 12,
                width : 60,
                left : true
            } );

            var audio = document.body.appendChild( document.createElement( "audio" ) );

            var debugSystem = debug.DebugSystem( "preview-info", {
                music : "true"
            } );
            var previewInfo = debugSystem.info();
            debugSystem.Option( "music", {
                "有音乐" : true,
                "无音乐" : false
            } );

            array.foreach( debug.themeNames, function ( name, i ) {
                themeBar.option( name, i + 1 );
            } );

            debug.setup = function () {
                window.themeNumber = themeBar.data;
                window.switchAnimate = switchBar.data;
                if ( previewInfo.music === "true" ) {
                    audio.src = "/ignore/theme-music/" + themeBar.data + ".mp3";
                    audio.play();
                }
            };

            debug.loadFirstPage( {
                type : "release"
            }, function () {
                debug.loadData( {
                    dir : "switch-animation-list",
                    doOut : function ( pageData ) {
                        object.foreach( pageData, function ( name, data ) {
                            switchBar.option( name, data );
                        } );
                    }
                }, debug.start );
            } );
        } );
    </script>
</head>
<body>
</body>
</html>