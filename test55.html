<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="utf-8">
    <meta name="mobileoptimized" content="0"/>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="screen-orientation" content="portrait">
    <meta name="browsermode" content="application">
    <title></title>
    <style>
        body {
            background: #f00;
        }

        * {
            font-size: 40px;
            font-family: "微软雅黑", sans-serif;
        }

        .time {
            display: inline-block;
            width: 100px;
            text-align: center;
            height: 60px;
            line-height: 60px;
            color: #000;
        }

        .stop {
            width: 100px;
            height: 50px;
            cursor: pointer;
        }
    </style>
</head>
<body>
<div class="time s"></div>
:
<div class="time m"></div>
<div class="stop">stop</div>
<script>
    (function () {
        function timer( duration, callback ) {
            var s = (new Date()).getTime();
            var st = document.querySelector( ".time.s" );
            var mt = document.querySelector( ".time.m" );
            var id = setTimeout( function () {
                var cha = (new Date()).getTime() - s;
                if ( cha >= duration ) {
                    st.innerText = duration / 1000 << 0;
                    mt.innerText = duration % 1000;
                    callback();
                }
                else {
                    st.innerText = cha / 1000 << 0;
                    mt.innerText = cha % 1000;
                    clearTimeout( id );
                    id = setTimeout( arguments.callee, 10 );
                }
            }, 10 );
            return {
                destroy : function () {
                    clearTimeout( id );
                }
            }
        }

        var handle = timer( 9282, function () {
            console.log( "end" )
        } );


        var stop = document.querySelector( ".stop" );
        stop.onclick = function () {
            handle.destroy();
        }
    })();
</script>
</body>
</html>